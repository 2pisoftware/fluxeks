FROM fedora:latest

# Install dnf packages
RUN dnf install -y \
    zsh \
    util-linux-user \
    git \
    wget \
    curl \
    which \
    nodejs npm \
    awscli \
    bat \
    micro

# Install AWS-CDK
RUN npm install -g aws-cdk

# Install FluxCD
RUN curl -s https://fluxcd.io/install.sh | bash

# Install Kubectl
RUN curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl" &&\
    mv kubectl /usr/local/bin/kubectl &&\
    chmod +x /usr/local/bin/kubectl

# Install Oh My Zsh
RUN sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
COPY .zshrc /root/.zshrc